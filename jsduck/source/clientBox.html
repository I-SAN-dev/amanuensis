<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='ama-directives-clientBox'>/**
</span> * @class ama.directives.clientBox
 *
 * The clientBox directive
 * Shows a client&#39;s data (address etc.)
 *
 * ## Usage
 *     &lt;div client-box=&quot;clientToShow&quot;&gt;&lt;/div&gt;
 *
 *
 * @author Christian Baur
 */
app.directive(&#39;clientBox&#39;, [
    function () {
        return {
            restrict: &#39;A&#39;,
            scope: {
                client: &#39;=clientBox&#39;
            },
            templateUrl: &#39;templates/directives/clientBox.html&#39;,
            controller: function($scope){

                var mailvalue;
                var mailname;

                $scope.$watch(&#39;client&#39;, function(){
                    if($scope.client &amp;&amp; $scope.client.data &amp;&amp; $scope.client.data.mail)
                    {
                        for(var i = 0; i&lt;$scope.client.data.mail.length; i++ )
                        {
                            if(i==0 || $scope.client.data.mail[i].isdefault == 1)
                            {
                                mailvalue = $scope.client.data.mail[i].value;
                                mailname = $scope.client.data.mail[i].name;
                            }
                        }
                        $scope.mail = {};
                        $scope.mail.value = mailvalue;
                        $scope.mail.name = mailname;
                    }
                });

            }
        }
    }
]);</pre>
</body>
</html>
